experiments:
  - name: "agricola"
    domain_file: "Agricola/domain.pddl"
    problems_dir: "Agricola/problems/"
    repeat: 1

  - name: "rovers"
    domain_file: "Rovers/StripsRover.pddl"
    problems_dir: "Rovers/"
    repeat: 1

  - name: "driverlog"
    domain_file: "DriverLog/domain.pddl"
    problems_dir: "DriverLog/problems/"
    repeat: 2


# --------------------------------
# per eseguire fasi
# --------------------------------
pipeline_options:
  run_create_plans: false
  run_remove_duplicates: false
  run_event_log: false
  run_cleaning: false
  run_grounding: true
  run_compound: false
  run_minerful: false


# --------------------------------
# parametri per creazione piani
# --------------------------------
planning:
  run_alias: true
  run_non_alias: true
  time_limit_alias: "800s"
  time_limit_non_alias: 800
  max_workers: 6

  # Lista completa dei comandi configurabili:
  commands:
    - "--search astar(hmax())"
    - "--search astar(lmcut())"
    - "--search eager_greedy([ff()])"
    - "--search eager_greedy([add()])"
    - "--search eager_wastar([add()],w=5)"
    - "--search eager_wastar([ff()],w=5)"
    - "--search lazy_greedy([ff()])"
    - "--search lazy_greedy([cg()])"
    - "--search lazy_wastar([ff()],w=5)"
    - "--search lazy_wastar([cg()],w=5)"
    - "--search ehc(ff())"
    - "--alias lama"
    - "--alias seq-sat-lama-2011"
    - "--alias seq-sat-fdss-2023"
    - "--alias seq-sat-fdss-2018"
    - "--alias seq-sat-fd-autotune-1"
    - "--alias seq-sat-fd-autotune-2"

# --------------------------------

eventlog:
  # Timestamp iniziale del primo evento 
  start_timestamp: "2025-01-01T00:00:00"
  # Incremento tra gli eventi in secondi
  increment_seconds: 1
  # Separatore CSV (pu√≤ essere ; o ,)
  csv_delimiter: ";"
  column_names:
    case_id: "case_id"      # default 
    event_id: "event_id"    # default 
    timestamp: "timestamp"  # default 
    extra_columns:          # Colonne aggiuntive opzionali definite dall'utente
      - "activity"
      - "actor"
      - "store"
      - "waypoint_1"
      - "waypoint_2"
      - "waypoint_3"
      - "objective"
    #  - "location"
    #  - "priority"

  # File di output (se l'utente vuole specificarlo)
  output_csv: null        # es. "results/event_log.csv"
  output_xes: null        # es. "results/event_log.xes"

  activity_mapping:

    # -------------------------
    # DOMAIN: ROVERS
    # -------------------------
    rovers:
      navigate:
        fields: ["actor", "waypoint_1", "waypoint_2"]

      sample_soil:
        fields: ["actor", "store", "waypoint_1"]
        static: { object_type: "soil" }

      sample_rock:
        fields: ["actor", "store", "waypoint_1"]
        static: { object_type: "rock" }

      drop:
        fields: ["actor", "store"]

      calibrate:
        fields: ["actor", "_", "objective", "waypoint_1"]

      take_image:
        fields: ["actor", "waypoint_1", "objective", "_", "_"]

      communicate_soil_data:
        fields: ["actor", "_", "waypoint_1", "waypoint_2", "waypoint_3"]
        static: { object_type: "soil" }

      communicate_rock_data:
        fields: ["actor", "_", "waypoint_1", "waypoint_2", "waypoint_3"]
        static: { object_type: "rock" }

      communicate_image_data:
        fields: ["actor", "_", "objective", "_", "waypoint_1", "waypoint_2"]
        static: { object_type: "image" }

    # -------------------------
    # DOMAIN: AGRICOLA
    # -------------------------
    agricola:
      take_grain:
        fields: ["worker", "worker_next", "_", "round", "vegetable"]

      take_food:
        fields: ["worker", "worker_next", "_", "round", "vegetable"]

      plow_field:
        fields: ["worker", "worker_next", "_", "round"]

      sow:
        fields: ["worker", "worker_next", "_", "round", "vegetable"]

      collect_resource:
        fields: ["worker", "worker_next", "_", "round", "_", "resource"]

      build_room:
        fields: ["worker", "worker_next"]

      improve_home:
        fields: ["worker", "worker_next"]

      family_growth:
        fields: ["worker", "worker_next"]

      collect_animal:
        fields: ["animal", "_", "worker", "worker_next", "_", "round"]

      collect_cook_animal:
        fields: ["animal", "_", "worker", "worker_next", "_", "round"]

      ag__harvest_collecting_veg:
        fields: ["round", "_", "vegetable"]

      ag__harvest_feed:
        fields: ["round"]

      ag__harvest_breeding_animal:
        fields: ["round", "_", "animal"]

      ag__harvest_collect_end:
        fields: ["round"]

      ag__harvest_breed_end:
        fields: ["round"]

      ag__finish_round_backhome:
        fields: ["round"]

      ag__finish_round_renew:
        fields: ["round"]

      ag__advance_round_normal:
        fields: ["round"]

      ag__finish_stage:
        fields: ["_", "_", "round"]

    # -------------------------
    # DOMAIN: DRIVERLOG
    # -------------------------
    driverlog:
      load-truck:
        fields: ["object", "truck", "loc_from"]

      unload-truck:
        fields: ["object", "truck", "loc_to"]

      board-truck:
        fields: ["driver", "truck", "loc_from"]

      disembark-truck:
        fields: ["driver", "truck", "loc_to"]

      drive-truck:
        fields: ["truck", "loc_from", "loc_to", "driver"]

      walk:
        fields: ["driver", "loc_from", "loc_to"]


# --------------------------------
# GROUNDING
# --------------------------------
grounding:
  enabled: true
  csv_separator: ";"
  drop_original_columns: true
  plan_column: "case_id"
  timestamp_column: "timestamp"
  activity_column: "activity"
  output_prefix: "grounded_event_log"

  aggregations:
    - name: "actor_store"
      columns: ["actor", "store"]

    - name: "concept_actor"
      columns: ["concept:name", "actor"]

    - name: "store_actor_objective"
      columns: ["store", "actor","objective"]



# --------------------------------
# COMPOUND
# --------------------------------
compound:
  enabled: true
  columns: ["agent", "action"]



# --------------------------------
# CLEANING
# --------------------------------
cleaning:
  enabled: true
  method: "general"      # oppure "none", o altri metodi futuri

  # Opzioni attivabili/disattivabili dall'utente
  options:
    remove_empty_columns: true
    remove_redundant_columns: true
    remove_constant_columns: true



# --------------------------------
# MINERFUL
# --------------------------------
minerful:
  enabled: true

  xmx_memory: "8096m"

  input_file: ""          # opzionale
  input_directory: ""     # opzionale

  output_dir: "minerful"
  output_csv_suffix: "_minerful.csv"
  output_json_suffix: "_minerful.json"

  csv_separator: ";"
  use_classifier: false
  classifier_name: "activityClassifier"
  classifier_keys: "objective"

  support: 0.06
  confidence: 1.0
  coverage: 0.06
  pruning_strategy: "hierarchyconflictredundancy"

  minerful_jar: "MINERful/MINERful.jar"
  minerful_lib: "MINERful/lib/*"



# --------------------------------
# INPUT OVERRIDE
# --------------------------------
input_override:
  plans_dir: "results/rovers/run_1/plans" 
  event_log_csv: "results/rovers/run_1/eventlog/event_log_Rovers_32.csv"
  event_log_xes: "results/rovers/run_1/eventlog/event_log_Rovers_32.xes"
  cleaned_csv: null
  cleaned_xes: null
  grounded_csv: null
  grounded_xes: null
  compound_csv: null
  compound_xes: null


# --------------------------------
# OUTPUT DIRS
# --------------------------------
output_dirs:
  base_dir: "results/"


# --------------------------------
# FAST DOWNWARD
# --------------------------------
fast_downward:
  path: "/home/chiara_maccabruno/progetto/downward/fast-downward.py"
  timeout_seconds: 300
